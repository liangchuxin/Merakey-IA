{"ast":null,"code":"import _regeneratorRuntime from\"/Users/celia/Projects/Merakey/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/celia/Projects/Merakey/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/celia/Projects/Merakey/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"../styles/login.scss\";import React from\"react\";import{useNavigate,Navigate}from\"react-router-dom\";import arrowIco from\"../images/arrow-right.svg\";import{ToastContainer,toast,Slide}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";// import LogInUser from \"./utilities/logInUser\";\nimport IsLoggedIn,{logOut,getCurrentUser}from\"./utilities/loginStatus\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(props){var navigate=useNavigate();React.useEffect(function(){document.getElementById(\"user\").focus();},[]);var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),pMode=_React$useState2[0],setPMode=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),success=_React$useState4[0],setSuccess=_React$useState4[1];// async function LogIn(user, pass) {\n//   var userStatus = await LogInUser(user, pass);\n//   return userStatus;\n// }\nfunction LogInUser(_x,_x2){return _LogInUser.apply(this,arguments);}function _LogInUser(){_LogInUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(username,password){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data={username:username,password:password};fetch(\"http://localhost:8080/api/auth/signin\",{method:\"POST\",// or 'PUT'\nheaders:{\"Content-Type\":\"application/json\"},body:JSON.stringify(data)}).then(function(response){// 用户名或密码错误显示错误\nif(!response.ok){toast.error(\"Username or password is not found\",{position:toast.POSITION.BOTTOM_RIGHT});return false;// 登录成功\n}else{// alert(\"User was logged in sucessfully!\");\nconsole.log(response);// navigate(\"/user\");\nwindow.location.href=\"/user\";return response.json();}}).then(function(data){console.log(\"Success:\",data);if(data.accessToken){localStorage.setItem(\"user\",JSON.stringify(data));}}).catch(function(error){console.error(\"Error:\",error);});case 2:case\"end\":return _context.stop();}}},_callee);}));return _LogInUser.apply(this,arguments);}var handleSubmit=function handleSubmit(){var user=document.getElementById(\"user\").value;var pass=document.getElementById(\"pass\").value;if(user==\"\"||pass==\"\"){toast.error(\"Field cannot be empty!\",{position:toast.POSITION.BOTTOM_RIGHT});}else{LogInUser(user,pass);// var userStatus = LogIn(user, pass);\n// console.log(\"User Status: \" + JSON.stringify(userStatus));\n// console.log(LogInUser(user, pass));\n}};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container background\",children:[/*#__PURE__*/_jsx(ToastContainer,{autoClose:2000,theme:\"dark\",transition:Slide}),/*#__PURE__*/_jsxs(\"h1\",{children:[\"Login to your account\",/*#__PURE__*/_jsx(\"span\",{children:\".\"})]}),/*#__PURE__*/_jsx(\"h2\",{children:!pMode?\"Welcome back to Merakey \\uD83D\\uDD11 !\":\"Welcome back to Merakey \\uD83D\\uDE48 !\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"user\",placeholder:\"Username *\"}),/*#__PURE__*/_jsx(\"input\",{id:\"pass\",type:\"password\",onFocus:function onFocus(){return setPMode(true);},onBlur:function onBlur(){return setPMode(false);},placeholder:\"Password *\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"submit-btn\",onClick:function onClick(){return handleSubmit();},children:[\"Start Your Journey\",/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"img\",{src:arrowIco})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"switch-notice\",children:[\"Not a member yet?\\xA0\\xA0\",/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return navigate(\"/signup\");},children:\"Sign up now\"})]})]});}export default Login;","map":{"version":3,"names":["React","useNavigate","Navigate","arrowIco","ToastContainer","toast","Slide","IsLoggedIn","logOut","getCurrentUser","Login","props","navigate","useEffect","document","getElementById","focus","useState","pMode","setPMode","success","setSuccess","LogInUser","username","password","data","fetch","method","headers","body","JSON","stringify","then","response","ok","error","position","POSITION","BOTTOM_RIGHT","console","log","window","location","href","json","accessToken","localStorage","setItem","catch","handleSubmit","user","value","pass"],"sources":["/Users/celia/Projects/Merakey/client/src/components/login.js"],"sourcesContent":["import \"../styles/login.scss\";\nimport React from \"react\";\nimport { useNavigate, Navigate } from \"react-router-dom\";\nimport arrowIco from \"../images/arrow-right.svg\";\nimport { ToastContainer, toast, Slide } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n// import LogInUser from \"./utilities/logInUser\";\nimport IsLoggedIn, { logOut, getCurrentUser } from \"./utilities/loginStatus\";\n\nfunction Login(props) {\n  const navigate = useNavigate();\n\n  React.useEffect(() => {\n    document.getElementById(\"user\").focus();\n  }, []);\n  const [pMode, setPMode] = React.useState(false);\n  const [success, setSuccess] = React.useState(false);\n  // async function LogIn(user, pass) {\n  //   var userStatus = await LogInUser(user, pass);\n  //   return userStatus;\n  // }\n  async function LogInUser(username, password) {\n    const data = {\n      username: username,\n      password: password,\n    };\n    fetch(`http://localhost:8080/api/auth/signin`, {\n      method: \"POST\", // or 'PUT'\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(data),\n    })\n      .then((response) => {\n        // 用户名或密码错误显示错误\n        if (!response.ok) {\n          toast.error(\"Username or password is not found\", {\n            position: toast.POSITION.BOTTOM_RIGHT,\n          });\n          return false;\n          // 登录成功\n        } else {\n          // alert(\"User was logged in sucessfully!\");\n          console.log(response);\n\n          // navigate(\"/user\");\n          window.location.href = \"/user\";\n          return response.json();\n        }\n      })\n      .then((data) => {\n        console.log(\"Success:\", data);\n        if (data.accessToken) {\n          localStorage.setItem(\"user\", JSON.stringify(data));\n        }\n      })\n      .catch((error) => {\n        console.error(\"Error:\", error);\n      });\n  }\n\n  const handleSubmit = () => {\n    var user = document.getElementById(\"user\").value;\n    var pass = document.getElementById(\"pass\").value;\n    if (user == \"\" || pass == \"\") {\n      toast.error(\"Field cannot be empty!\", {\n        position: toast.POSITION.BOTTOM_RIGHT,\n      });\n    } else {\n      LogInUser(user, pass);\n      // var userStatus = LogIn(user, pass);\n      // console.log(\"User Status: \" + JSON.stringify(userStatus));\n      // console.log(LogInUser(user, pass));\n    }\n  };\n  return (\n    <div className=\"login-container background\">\n      <ToastContainer autoClose={2000} theme=\"dark\" transition={Slide} />\n      <h1>\n        Login to your account<span>.</span>\n      </h1>\n      <h2>\n        {!pMode\n          ? `Welcome back to Merakey 🔑 !`\n          : `Welcome back to Merakey 🙈 !`}\n      </h2>\n      <div className=\"form-group\">\n        <input id=\"user\" placeholder=\"Username *\"></input>\n        <input\n          id=\"pass\"\n          type=\"password\"\n          onFocus={() => setPMode(true)}\n          onBlur={() => setPMode(false)}\n          placeholder=\"Password *\"\n        ></input>\n        <div className=\"submit-btn\" onClick={() => handleSubmit()}>\n          Start Your Journey\n          <span>\n            <img src={arrowIco} />\n          </span>\n        </div>\n      </div>\n      <div className=\"switch-notice\">\n        Not a member yet?&nbsp;&nbsp;\n        <span onClick={() => navigate(\"/signup\")}>Sign up now</span>\n      </div>\n    </div>\n  );\n}\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}