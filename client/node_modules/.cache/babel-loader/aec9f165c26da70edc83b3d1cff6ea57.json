{"ast":null,"code":"import _slicedToArray from\"/Users/celia/Projects/Merakey/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"../styles/navBar.scss\";import logo from\"../images/logo.png\";import React,{useEffect,useState}from\"react\";import{useNavigate,useLocation}from\"react-router-dom\";import{Search}from\"./search\";import searchIco from\"../images/search-white.svg\";import IsLoggedIn,{logOut,getCurrentUser}from\"./utilities/loginStatus\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function NavBar(props){React.useEffect(function(){window.scrollTo(0,0);},[]);var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),searchState=_React$useState2[0],setSearchState=_React$useState2[1];var closeParentSearch=function closeParentSearch(){setSearchState(false);};var openParentSearch=function openParentSearch(){setSearchState(true);};function ShowSearch(props){return/*#__PURE__*/_jsx(Search,{show:props.show,closeParent:closeParentSearch});}var path=window.location.pathname.split(\"/\")[1];var navigate=useNavigate();// console.log(\"search state: \" + searchState);\nif(getCurrentUser){// console.log(getCurrentUser);\nvar username=getCurrentUser.username;var email=getCurrentUser.email;var id=getCurrentUser.id;var roles=[];getCurrentUser.roles.forEach(function(x,i){return roles.push(x.slice(5).toLowerCase());});// console.log(roles);\n}var _React$useState3=React.useState(\"https://cdn.jsdelivr.net/gh/liangchuxin/blog-imgs/img/202209210118002.png\"),_React$useState4=_slicedToArray(_React$useState3,2),avatar=_React$useState4[0],setAvatar=_React$useState4[1];var getUser=function getUser(userId){fetch(\"http://localhost:8080/api/profiles/\".concat(userId),{method:\"GET\",headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(data){setAvatar(data.avatar);});};React.useEffect(function(){getUser(id);},[]);if(path===\"login\"||path===\"signup\"){return/*#__PURE__*/_jsx(\"div\",{className:\"navSimple\",children:/*#__PURE__*/_jsx(\"div\",{className:\"logo-container\",onClick:function onClick(){return navigate(\"/\");},children:/*#__PURE__*/_jsx(\"img\",{className:\"logo\",src:logo})})});}else{return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ShowSearch,{show:searchState}),/*#__PURE__*/_jsx(\"div\",{className:\"navBar\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo-container\",onClick:function onClick(){return navigate(\"/\");},children:/*#__PURE__*/_jsx(\"img\",{className:\"logo\",src:logo})}),/*#__PURE__*/_jsxs(\"div\",{className:\"navigation\",children:[/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{className:path===\"\"?\"active\":\"\",children:/*#__PURE__*/_jsx(\"a\",{onClick:function onClick(){return navigate(\"/\");},children:\"Home\"})}),/*#__PURE__*/_jsx(\"li\",{className:path===\"about\"?\"active\":\"\",children:/*#__PURE__*/_jsx(\"a\",{onClick:function onClick(){return navigate(\"/about\");},children:\"About\"})}),/*#__PURE__*/_jsx(\"li\",{className:path===\"subjects\"?\"active\":\"\",children:/*#__PURE__*/_jsx(\"a\",{onClick:function onClick(){return navigate(\"/subjects\");},children:\"Subjects\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",onClick:function onClick(){alert(\"未满十八不得充钱（\");},children:\"Upgrade\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{onClick:function onClick(){return openParentSearch();},children:/*#__PURE__*/_jsx(\"img\",{src:searchIco})})}),!IsLoggedIn()&&/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{onClick:function onClick(){return navigate(\"/signup\");},className:\"li-btn\",children:\"Sign up\"})})]}),IsLoggedIn()&&/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{onClick:function onClick(){return navigate(\"/user\");},children:/*#__PURE__*/_jsx(\"div\",{className:\"avatar\",children:/*#__PURE__*/_jsx(\"img\",{src:avatar})})})})]})]})})]});}}export default NavBar;","map":{"version":3,"names":["logo","React","useEffect","useState","useNavigate","useLocation","Search","searchIco","IsLoggedIn","logOut","getCurrentUser","NavBar","props","window","scrollTo","searchState","setSearchState","closeParentSearch","openParentSearch","ShowSearch","show","path","location","pathname","split","navigate","username","email","id","roles","forEach","x","i","push","slice","toLowerCase","avatar","setAvatar","getUser","userId","fetch","method","headers","then","res","json","data","alert"],"sources":["/Users/celia/Projects/Merakey/client/src/components/navBar.js"],"sourcesContent":["import \"../styles/navBar.scss\";\nimport logo from \"../images/logo.png\";\nimport React, { useEffect, useState } from \"react\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport { Search } from \"./search\";\nimport searchIco from \"../images/search-white.svg\";\nimport IsLoggedIn, { logOut, getCurrentUser } from \"./utilities/loginStatus\";\n\nfunction NavBar(props) {\n  React.useEffect(() => {\n    window.scrollTo(0, 0);\n  }, []);\n  const [searchState, setSearchState] = React.useState(false);\n  const closeParentSearch = () => {\n    setSearchState(false);\n  };\n  const openParentSearch = () => {\n    setSearchState(true);\n  };\n\n  function ShowSearch(props) {\n    return <Search show={props.show} closeParent={closeParentSearch} />;\n  }\n  const path = window.location.pathname.split(\"/\")[1];\n  const navigate = useNavigate();\n\n  // console.log(\"search state: \" + searchState);\n  if (getCurrentUser) {\n    // console.log(getCurrentUser);\n    var username = getCurrentUser.username;\n    var email = getCurrentUser.email;\n    var id = getCurrentUser.id;\n    var roles = [];\n    getCurrentUser.roles.forEach((x, i) =>\n      roles.push(x.slice(5).toLowerCase())\n    );\n    // console.log(roles);\n  }\n  const [avatar, setAvatar] = React.useState(\n    \"https://cdn.jsdelivr.net/gh/liangchuxin/blog-imgs/img/202209210118002.png\"\n  );\n  const getUser = (userId) => {\n    fetch(`http://localhost:8080/api/profiles/${userId}`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        setAvatar(data.avatar);\n      });\n  };\n  React.useEffect(() => {\n    getUser(id);\n  }, []);\n  if (path === \"login\" || path === \"signup\") {\n    return (\n      <div className=\"navSimple\">\n        <div className=\"logo-container\" onClick={() => navigate(\"/\")}>\n          <img className=\"logo\" src={logo} />\n        </div>\n      </div>\n    );\n  } else {\n    return (\n      <>\n        <ShowSearch show={searchState} />\n        <div className=\"navBar\">\n          <div className=\"container\">\n            <div className=\"logo-container\" onClick={() => navigate(\"/\")}>\n              <img className=\"logo\" src={logo} />\n            </div>\n            <div className=\"navigation\">\n              <ul>\n                <li className={path === \"\" ? \"active\" : \"\"}>\n                  <a onClick={() => navigate(\"/\")}>Home</a>\n                </li>\n                <li className={path === \"about\" ? \"active\" : \"\"}>\n                  <a onClick={() => navigate(\"/about\")}>About</a>\n                </li>\n                <li className={path === \"subjects\" ? \"active\" : \"\"}>\n                  <a onClick={() => navigate(\"/subjects\")}>Subjects</a>\n                </li>\n                <li>\n                  <a\n                    href=\"#\"\n                    onClick={() => {\n                      alert(\"未满十八不得充钱（\");\n                    }}\n                  >\n                    Upgrade\n                  </a>\n                </li>\n                <li>\n                  <a onClick={() => openParentSearch()}>\n                    <img src={searchIco} />\n                  </a>\n                </li>\n                {!IsLoggedIn() && (\n                  <li>\n                    <a onClick={() => navigate(\"/signup\")} className=\"li-btn\">\n                      Sign up\n                    </a>\n                  </li>\n                )}\n              </ul>\n              {IsLoggedIn() && (\n                <li>\n                  <a onClick={() => navigate(\"/user\")}>\n                    <div className=\"avatar\">\n                      <img src={avatar} />\n                    </div>\n                  </a>\n                </li>\n              )}\n            </div>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\nexport default NavBar;\n"],"mappings":"0HAAA,MAAO,uBAAP,CACA,MAAOA,KAAP,KAAiB,oBAAjB,CACA,MAAOC,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,kBAAzC,CACA,OAASC,MAAT,KAAuB,UAAvB,CACA,MAAOC,UAAP,KAAsB,4BAAtB,CACA,MAAOC,WAAP,EAAqBC,MAArB,CAA6BC,cAA7B,KAAmD,yBAAnD,C,6IAEA,QAASC,OAAT,CAAgBC,KAAhB,CAAuB,CACrBX,KAAK,CAACC,SAAN,CAAgB,UAAM,CACpBW,MAAM,CAACC,QAAP,CAAgB,CAAhB,CAAmB,CAAnB,EACD,CAFD,CAEG,EAFH,EAGA,oBAAsCb,KAAK,CAACE,QAAN,CAAe,KAAf,CAAtC,oDAAOY,WAAP,qBAAoBC,cAApB,qBACA,GAAMC,kBAAiB,CAAG,QAApBA,kBAAoB,EAAM,CAC9BD,cAAc,CAAC,KAAD,CAAd,CACD,CAFD,CAGA,GAAME,iBAAgB,CAAG,QAAnBA,iBAAmB,EAAM,CAC7BF,cAAc,CAAC,IAAD,CAAd,CACD,CAFD,CAIA,QAASG,WAAT,CAAoBP,KAApB,CAA2B,CACzB,mBAAO,KAAC,MAAD,EAAQ,IAAI,CAAEA,KAAK,CAACQ,IAApB,CAA0B,WAAW,CAAEH,iBAAvC,EAAP,CACD,CACD,GAAMI,KAAI,CAAGR,MAAM,CAACS,QAAP,CAAgBC,QAAhB,CAAyBC,KAAzB,CAA+B,GAA/B,EAAoC,CAApC,CAAb,CACA,GAAMC,SAAQ,CAAGrB,WAAW,EAA5B,CAEA;AACA,GAAIM,cAAJ,CAAoB,CAClB;AACA,GAAIgB,SAAQ,CAAGhB,cAAc,CAACgB,QAA9B,CACA,GAAIC,MAAK,CAAGjB,cAAc,CAACiB,KAA3B,CACA,GAAIC,GAAE,CAAGlB,cAAc,CAACkB,EAAxB,CACA,GAAIC,MAAK,CAAG,EAAZ,CACAnB,cAAc,CAACmB,KAAf,CAAqBC,OAArB,CAA6B,SAACC,CAAD,CAAIC,CAAJ,QAC3BH,MAAK,CAACI,IAAN,CAAWF,CAAC,CAACG,KAAF,CAAQ,CAAR,EAAWC,WAAX,EAAX,CAD2B,EAA7B,EAGA;AACD,CACD,qBAA4BlC,KAAK,CAACE,QAAN,CAC1B,2EAD0B,CAA5B,qDAAOiC,MAAP,qBAAeC,SAAf,qBAGA,GAAMC,QAAO,CAAG,QAAVA,QAAU,CAACC,MAAD,CAAY,CAC1BC,KAAK,8CAAuCD,MAAvC,EAAiD,CACpDE,MAAM,CAAE,KAD4C,CAEpDC,OAAO,CAAE,CACP,eAAgB,kBADT,CAF2C,CAAjD,CAAL,CAMGC,IANH,CAMQ,SAACC,GAAD,QAASA,IAAG,CAACC,IAAJ,EAAT,EANR,EAOGF,IAPH,CAOQ,SAACG,IAAD,CAAU,CACdT,SAAS,CAACS,IAAI,CAACV,MAAN,CAAT,CACD,CATH,EAUD,CAXD,CAYAnC,KAAK,CAACC,SAAN,CAAgB,UAAM,CACpBoC,OAAO,CAACV,EAAD,CAAP,CACD,CAFD,CAEG,EAFH,EAGA,GAAIP,IAAI,GAAK,OAAT,EAAoBA,IAAI,GAAK,QAAjC,CAA2C,CACzC,mBACE,YAAK,SAAS,CAAC,WAAf,uBACE,YAAK,SAAS,CAAC,gBAAf,CAAgC,OAAO,CAAE,yBAAMI,SAAQ,CAAC,GAAD,CAAd,EAAzC,uBACE,YAAK,SAAS,CAAC,MAAf,CAAsB,GAAG,CAAEzB,IAA3B,EADF,EADF,EADF,CAOD,CARD,IAQO,CACL,mBACE,wCACE,KAAC,UAAD,EAAY,IAAI,CAAEe,WAAlB,EADF,cAEE,YAAK,SAAS,CAAC,QAAf,uBACE,aAAK,SAAS,CAAC,WAAf,wBACE,YAAK,SAAS,CAAC,gBAAf,CAAgC,OAAO,CAAE,yBAAMU,SAAQ,CAAC,GAAD,CAAd,EAAzC,uBACE,YAAK,SAAS,CAAC,MAAf,CAAsB,GAAG,CAAEzB,IAA3B,EADF,EADF,cAIE,aAAK,SAAS,CAAC,YAAf,wBACE,mCACE,WAAI,SAAS,CAAEqB,IAAI,GAAK,EAAT,CAAc,QAAd,CAAyB,EAAxC,uBACE,UAAG,OAAO,CAAE,yBAAMI,SAAQ,CAAC,GAAD,CAAd,EAAZ,kBADF,EADF,cAIE,WAAI,SAAS,CAAEJ,IAAI,GAAK,OAAT,CAAmB,QAAnB,CAA8B,EAA7C,uBACE,UAAG,OAAO,CAAE,yBAAMI,SAAQ,CAAC,QAAD,CAAd,EAAZ,mBADF,EAJF,cAOE,WAAI,SAAS,CAAEJ,IAAI,GAAK,UAAT,CAAsB,QAAtB,CAAiC,EAAhD,uBACE,UAAG,OAAO,CAAE,yBAAMI,SAAQ,CAAC,WAAD,CAAd,EAAZ,sBADF,EAPF,cAUE,iCACE,UACE,IAAI,CAAC,GADP,CAEE,OAAO,CAAE,kBAAM,CACbsB,KAAK,CAAC,WAAD,CAAL,CACD,CAJH,qBADF,EAVF,cAoBE,iCACE,UAAG,OAAO,CAAE,yBAAM7B,iBAAgB,EAAtB,EAAZ,uBACE,YAAK,GAAG,CAAEX,SAAV,EADF,EADF,EApBF,CAyBG,CAACC,UAAU,EAAX,eACC,iCACE,UAAG,OAAO,CAAE,yBAAMiB,SAAQ,CAAC,SAAD,CAAd,EAAZ,CAAuC,SAAS,CAAC,QAAjD,qBADF,EA1BJ,GADF,CAkCGjB,UAAU,iBACT,iCACE,UAAG,OAAO,CAAE,yBAAMiB,SAAQ,CAAC,OAAD,CAAd,EAAZ,uBACE,YAAK,SAAS,CAAC,QAAf,uBACE,YAAK,GAAG,CAAEW,MAAV,EADF,EADF,EADF,EAnCJ,GAJF,GADF,EAFF,GADF,CAwDD,CACF,CACD,cAAezB,OAAf"},"metadata":{},"sourceType":"module"}