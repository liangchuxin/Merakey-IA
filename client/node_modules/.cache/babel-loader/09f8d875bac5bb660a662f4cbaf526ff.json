{"ast":null,"code":"import _regeneratorRuntime from\"/Users/celia/Projects/Merakey/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/celia/Projects/Merakey/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/celia/Projects/Merakey/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import IsLoggedIn,{logout,getCurrentUser}from\"../utilities/loginStatus\";import React,{useEffect,useState,useMemo}from\"react\";import SideMenu from\"./sideMenu\";import{useNavigate}from\"react-router-dom\";// icons\nimport opMail from\"./icons/op-mail.svg\";import opSet from\"./icons/op-settings.svg\";import opLogOut from\"./icons/op-log-out.svg\";import infoUser from\"./icons/info-user.svg\";import infoHash from\"./icons/info-hash.svg\";import infoMail from\"./icons/info-mail.svg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function UnChangedSide(){var navigate=useNavigate();var _React$useState=React.useState(\"offline\"),_React$useState2=_slicedToArray(_React$useState,2),status=_React$useState2[0],setStatus=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),name=_React$useState4[0],setName=_React$useState4[1];var _React$useState5=React.useState(\"https://cdn.jsdelivr.net/gh/liangchuxin/blog-imgs/img/202209210118002.png\"),_React$useState6=_slicedToArray(_React$useState5,2),avatar=_React$useState6[0],setAvatar=_React$useState6[1];var getUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(userId){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://localhost:8080/api/profiles/\".concat(userId),{method:\"GET\",headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(data){setAvatar(data.avatar);setName(data.displayName);setStatus(data.status);});case 2:case\"end\":return _context.stop();}}},_callee);}));return function getUser(_x){return _ref.apply(this,arguments);};}();React.useEffect(function(){getUser(id);},[]);if(getCurrentUser){// console.log(getCurrentUser);\nvar id=getCurrentUser.id;var roles=[];getCurrentUser.roles.forEach(function(x,i){return roles.push(x.slice(5).toLowerCase());});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){return navigate(\"/user/settings\");},className:\"avatar-container \".concat(status),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"avatar-overlay\",children:[\"EDIT\",/*#__PURE__*/_jsx(\"br\",{}),\"PROFILE\"]}),/*#__PURE__*/_jsx(\"img\",{src:avatar})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-name\",children:[\"@\",name,/*#__PURE__*/_jsx(\"span\",{className:\"user-status \".concat(status)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"operations\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"op-btn\",children:/*#__PURE__*/_jsx(\"img\",{src:opMail})}),/*#__PURE__*/_jsx(\"div\",{className:\"op-btn\",onClick:function onClick(){return navigate(\"/user/settings\");},children:/*#__PURE__*/_jsx(\"img\",{src:opSet})}),/*#__PURE__*/_jsx(\"div\",{className:\"op-btn\",title:\"log out\",onClick:function onClick(){return logout();},children:/*#__PURE__*/_jsx(\"img\",{src:opLogOut})})]})]});}function SecondSide(){var username=getCurrentUser.username;var email=getCurrentUser.email;if(getCurrentUser){// console.log(getCurrentUser);\nvar id=getCurrentUser.id;var roles=[];getCurrentUser.roles.forEach(function(x,i){return roles.push(x.slice(5).toLowerCase());});}var unchanged=React.useMemo(function(){return/*#__PURE__*/_jsx(UnChangedSide,{});},[]);return/*#__PURE__*/_jsx(\"aside\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"user-sidebar\",children:[unchanged,/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"divider top\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"account\",children:[/*#__PURE__*/_jsx(\"img\",{src:infoUser}),/*#__PURE__*/_jsx(\"span\",{children:username.toLowerCase()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"uid\",children:[/*#__PURE__*/_jsx(\"img\",{src:infoHash}),/*#__PURE__*/_jsx(\"span\",{children:id.toString().padStart(7,\"0\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mail\",children:[/*#__PURE__*/_jsx(\"img\",{src:infoMail}),/*#__PURE__*/_jsx(\"span\",{children:email})]}),/*#__PURE__*/_jsx(\"div\",{className:\"badges\",children:roles.map(function(role){return/*#__PURE__*/_jsxs(\"div\",{className:\"badge \".concat(role),title:role,children:[/*#__PURE__*/_jsx(\"span\",{className:\"color-container\"}),/*#__PURE__*/_jsx(\"span\",{children:role.charAt(0).toUpperCase()+role.slice(1)})]});})}),/*#__PURE__*/_jsx(\"div\",{className:\"divider bottom\"})]}),/*#__PURE__*/_jsx(SideMenu,{})]})});}export default SecondSide;","map":{"version":3,"names":["IsLoggedIn","logout","getCurrentUser","React","useEffect","useState","useMemo","SideMenu","useNavigate","opMail","opSet","opLogOut","infoUser","infoHash","infoMail","UnChangedSide","navigate","status","setStatus","name","setName","avatar","setAvatar","getUser","userId","fetch","method","headers","then","res","json","data","displayName","id","roles","forEach","x","i","push","slice","toLowerCase","SecondSide","username","email","unchanged","toString","padStart","map","role","charAt","toUpperCase"],"sources":["/Users/celia/Projects/Merakey/client/src/components/user/secondSide.js"],"sourcesContent":["import IsLoggedIn, { logout, getCurrentUser } from \"../utilities/loginStatus\";\nimport React, { useEffect, useState, useMemo } from \"react\";\nimport SideMenu from \"./sideMenu\";\nimport { useNavigate } from \"react-router-dom\";\n\n// icons\nimport opMail from \"./icons/op-mail.svg\";\nimport opSet from \"./icons/op-settings.svg\";\nimport opLogOut from \"./icons/op-log-out.svg\";\nimport infoUser from \"./icons/info-user.svg\";\nimport infoHash from \"./icons/info-hash.svg\";\nimport infoMail from \"./icons/info-mail.svg\";\n\nfunction UnChangedSide() {\n  const navigate = useNavigate();\n\n  const [status, setStatus] = React.useState(\"offline\");\n  const [name, setName] = React.useState(\"\");\n  const [avatar, setAvatar] = React.useState(\n    \"https://cdn.jsdelivr.net/gh/liangchuxin/blog-imgs/img/202209210118002.png\"\n  );\n  const getUser = async (userId) => {\n    await fetch(`http://localhost:8080/api/profiles/${userId}`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        setAvatar(data.avatar);\n        setName(data.displayName);\n        setStatus(data.status);\n      });\n  };\n  React.useEffect(() => {\n    getUser(id);\n  }, []);\n  if (getCurrentUser) {\n    // console.log(getCurrentUser);\n    var id = getCurrentUser.id;\n    var roles = [];\n    getCurrentUser.roles.forEach((x, i) =>\n      roles.push(x.slice(5).toLowerCase())\n    );\n  }\n  return (\n    <>\n      <div\n        onClick={() => navigate(\"/user/settings\")}\n        className={`avatar-container ${status}`}\n      >\n        <div className=\"avatar-overlay\">\n          EDIT\n          <br />\n          PROFILE\n        </div>\n        {/* <span className={`user-status ${status}`} /> */}\n        <img src={avatar} />\n      </div>\n      <div className=\"user-name\">\n        @{name}\n        <span className={`user-status ${status}`} />\n      </div>\n      <div className=\"operations\">\n        <div className=\"op-btn\">\n          <img src={opMail} />\n        </div>\n        <div className=\"op-btn\" onClick={() => navigate(\"/user/settings\")}>\n          <img src={opSet} />\n        </div>\n        <div className=\"op-btn\" title=\"log out\" onClick={() => logout()}>\n          <img src={opLogOut} />\n        </div>\n      </div>\n    </>\n  );\n}\n\nfunction SecondSide() {\n  var username = getCurrentUser.username;\n  var email = getCurrentUser.email;\n  if (getCurrentUser) {\n    // console.log(getCurrentUser);\n    var id = getCurrentUser.id;\n    var roles = [];\n    getCurrentUser.roles.forEach((x, i) =>\n      roles.push(x.slice(5).toLowerCase())\n    );\n  }\n  const unchanged = React.useMemo(() => <UnChangedSide />, []);\n  return (\n    <aside>\n      <div className=\"user-sidebar\">\n        {unchanged}\n        <div className=\"user-info\">\n          <div className=\"divider top\" />\n          <div className=\"account\">\n            <img src={infoUser} />\n            <span>{username.toLowerCase()}</span>\n          </div>\n          <div className=\"uid\">\n            <img src={infoHash} />\n            <span>{id.toString().padStart(7, \"0\")}</span>\n          </div>\n          <div className=\"mail\">\n            <img src={infoMail} />\n            <span>{email}</span>\n          </div>\n          <div className=\"badges\">\n            {roles.map((role) => (\n              <div className={`badge ${role}`} title={role}>\n                <span className=\"color-container\"></span>\n                <span>{role.charAt(0).toUpperCase() + role.slice(1)}</span>\n              </div>\n            ))}\n          </div>\n          <div className=\"divider bottom\" />\n        </div>\n        <SideMenu />\n      </div>\n    </aside>\n  );\n}\nexport default SecondSide;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}