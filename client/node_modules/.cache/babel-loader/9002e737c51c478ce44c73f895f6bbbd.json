{"ast":null,"code":"import _regeneratorRuntime from\"/Users/celia/Projects/Merakey/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/celia/Projects/Merakey/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/celia/Projects/Merakey/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import IsLoggedIn,{logout,getCurrentUser}from\"../utilities/loginStatus\";import SecondSide from\"./secondSide\";import axios from\"axios\";import React,{useEffect,useRef}from\"react\";import{ToastContainer,toast,Slide}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import\"./styles/addStory.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function AddStory(){function RecommendedTag(_ref){var tagName=_ref.tagName;var tagBox=document.getElementById(\"game-tags\");var addTag=function addTag(tagName){var tagBox=document.getElementById(\"game-tags\");tagBox.value+=\"\".concat(tagName,\", \");};return/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return addTag(tagName);},children:tagName});}var addGame=function addGame(game){axios.post(\"http://localhost:8080/api/games/\",game).then(function(response){console.log(response);toast.success(\"Game is created successfully\",{position:toast.POSITION.BOTTOM_RIGHT,onClose:function onClose(){return window.location.href=\"http://localhost:8000/user/games\";}});}).catch(function(error){console.log(error.response);});};function CheckImage(url,fieldName){return new Promise(function(resolve,reject){var image=new Image();image.onload=function(){if(this.width>0){// console.log(\"image exists\");\nresolve(true);}};image.onerror=function(){// console.log(\"image doesn't exist\");\ntoast.error(fieldName+\" URL is invalid!\",{position:toast.POSITION.BOTTOM_RIGHT});resolve(false);};image.src=url;});}var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),type=_React$useState2[0],setType=_React$useState2[1];var _React$useState3=React.useState(null),_React$useState4=_slicedToArray(_React$useState3,2),jsonStatus=_React$useState4[0],setJsonStatus=_React$useState4[1];React.useEffect(function(){// scroll to top\nwindow.scrollTo(0,0);},[]);if(getCurrentUser){console.log(getCurrentUser);var id=getCurrentUser.id;var roles=[];getCurrentUser.roles.forEach(function(x,i){return roles.push(x.slice(5).toLowerCase());});console.log(roles);}var _React$useState5=React.useState(null),_React$useState6=_slicedToArray(_React$useState5,2),playTime=_React$useState6[0],setPlayTime=_React$useState6[1];var submitJSON=function submitJSON(){var jsonText=document.getElementById(\"jsonText\").value;try{var parsedJSON=eval(\"(\"+jsonText+\")\");setPlayTime(Object.keys(parsedJSON).length*10);setJsonStatus(true);}catch(SyntaxError){toast.error(\"The JSON submitted is invalid!\",{position:toast.POSITION.BOTTOM_RIGHT});setJsonStatus(false);return false;}};var submitGame=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(published){var title,coverHome;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(jsonStatus){title=document.getElementById(\"game-title\").value;if(title){coverHome=document.getElementById(\"home-cover\").value;CheckImage(coverHome,\"Home cover\").then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(exists){var coverWide;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(exists){console.log(\"success\");coverWide=document.getElementById(\"wide-cover\").value;CheckImage(coverWide,\"Wide cover\").then(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(exists){var tags,jsonText,parsedJSON,description,game;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(exists){if(!type){toast.error(\"Type of game not chosen!\",{position:toast.POSITION.BOTTOM_RIGHT});}if(type==\"other\"){if(!document.getElementById(\"source-url\").value){toast.error(\"Source not inputted!\",{position:toast.POSITION.BOTTOM_RIGHT});}}tags=document.getElementById(\"game-tags\").value;jsonText=document.getElementById(\"jsonText\").value;parsedJSON=eval(\"(\"+jsonText+\")\");description=document.getElementById(\"source-url\").value+\"\\n-\\n\"+document.getElementById(\"game-desc\").value;game={name:title,coverR:coverHome,coverW:coverWide,published:published,tags:tags,description:description,plot:JSON.stringify(parsedJSON),authorId:id};console.log(game);console.log(parsedJSON);addGame(game);}case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x3){return _ref4.apply(this,arguments);};}());}case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref3.apply(this,arguments);};}());}else{toast.error(\"Please input a title!\",{position:toast.POSITION.BOTTOM_RIGHT});}}else{toast.error(\"Valid JSON not submitted!\",{position:toast.POSITION.BOTTOM_RIGHT});}case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function submitGame(_x){return _ref2.apply(this,arguments);};}();var secToMin=function secToMin(sec){return Math.round(sec/60*10)/10;};var clickTag=function clickTag(e){};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(SecondSide,{}),/*#__PURE__*/_jsx(\"section\",{class:\"user-main\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"addStory\",children:[/*#__PURE__*/_jsx(ToastContainer,{autoClose:1000,theme:\"dark\",transition:Slide}),/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsx(\"img\",{}),\"Add a Game\"]}),/*#__PURE__*/_jsx(\"textarea\",{id:\"jsonText\",placeholder:\"Please input json\\u2026\",rows:\"15\",spellcheck:\"false\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"submit-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"submit-btn\",onClick:function onClick(){return submitJSON();},children:\"Submit JSON\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"time-message\",children:[\"Estimated maximum play time:\",\" \",playTime!==null?\"\".concat(secToMin(playTime),\" minutes\"):\"N/A\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"game-attributes\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Game Settings\"}),/*#__PURE__*/_jsx(\"div\",{className:\"attribute-single title-set\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"h4-set\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Title*\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"input-container\",children:/*#__PURE__*/_jsx(\"input\",{id:\"game-title\",className:\"setting-field\",placeholder:\"Please input the name of the game\\u2026\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"attribute-single cover-set\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"h4-set\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Cover*\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"input-container\",children:/*#__PURE__*/_jsx(\"input\",{id:\"home-cover\",className:\"setting-field\",placeholder:\"Please input url for game cover (for homepage)\\u2026\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"attribute-single cover-set\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"h4-set\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Wide Cover\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"input-container\",children:/*#__PURE__*/_jsx(\"input\",{id:\"wide-cover\",className:\"setting-field\",placeholder:\"Please input url for game cover (for details page)\\u2026\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"attribute-single\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"h4-set\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Type*\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsxs(\"select\",{id:\"type\",name:\"status\",onChange:function onChange(){return setType(document.getElementById(\"type\").value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"none\",children:\"== Choose Type ==\"}),/*#__PURE__*/_jsx(\"option\",{value:\"self\",children:\"\\uD83D\\uDE4B Self-made\"}),/*#__PURE__*/_jsx(\"option\",{value:\"other\",children:\"\\uD83D\\uDD17 Other sources\"})]}),type==\"other\"&&/*#__PURE__*/_jsx(\"input\",{id:\"source-url\",className:\"setting-field\",placeholder:\"Please input url for the original source of the game\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"attribute-single tags-set\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"h4-set\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Tags\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"input-container\",children:/*#__PURE__*/_jsx(\"input\",{className:\"setting-field\",id:\"game-tags\",placeholder:\"Please input tags for game (separated with English comma)\"})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Recommended tags: \",/*#__PURE__*/_jsx(RecommendedTag,{tagName:\"humor\"}),/*#__PURE__*/_jsx(RecommendedTag,{tagName:\"horror\"}),/*#__PURE__*/_jsx(RecommendedTag,{tagName:\"romance\"}),/*#__PURE__*/_jsx(RecommendedTag,{tagName:\"fantasy\"}),/*#__PURE__*/_jsx(RecommendedTag,{tagName:\"random\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"attribute-single desc-set\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"h4-set\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Description\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"input-container\",children:/*#__PURE__*/_jsx(\"textarea\",{id:\"game-desc\",rows:\"8\",className:\"setting-field\",placeholder:\"This will be the best game on Merakey ever\\u2026\"})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"btn-container\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"submit-btn\",onClick:function onClick(){return submitGame(false);},children:\"Save as Draft\"}),roles.includes(\"moderator\")?/*#__PURE__*/_jsx(\"div\",{class:\"submit-btn submit-game\",onClick:function onClick(){return submitGame(true);},children:\"Submit Game Now\"}):roles.includes(\"admin\")?/*#__PURE__*/_jsx(\"div\",{class:\"submit-btn submit-game\",onClick:function onClick(){return submitGame(true);},children:\"Submit Game Now\"}):/*#__PURE__*/_jsx(\"div\",{class:\"submit-btn submit-game\",children:\"Submit Game for Review\"})]})]})})]});}export default AddStory;","map":{"version":3,"names":["IsLoggedIn","logout","getCurrentUser","SecondSide","axios","React","useEffect","useRef","ToastContainer","toast","Slide","AddStory","RecommendedTag","tagName","tagBox","document","getElementById","addTag","value","addGame","game","post","then","response","console","log","success","position","POSITION","BOTTOM_RIGHT","onClose","window","location","href","catch","error","CheckImage","url","fieldName","Promise","resolve","reject","image","Image","onload","width","onerror","src","useState","type","setType","jsonStatus","setJsonStatus","scrollTo","id","roles","forEach","x","i","push","slice","toLowerCase","playTime","setPlayTime","submitJSON","jsonText","parsedJSON","eval","Object","keys","length","SyntaxError","submitGame","published","title","coverHome","exists","coverWide","tags","description","name","coverR","coverW","plot","JSON","stringify","authorId","secToMin","sec","Math","round","clickTag","e","includes"],"sources":["/Users/celia/Projects/Merakey/client/src/components/user/addStory.js"],"sourcesContent":["import IsLoggedIn, { logout, getCurrentUser } from \"../utilities/loginStatus\";\nimport SecondSide from \"./secondSide\";\nimport axios from \"axios\";\nimport React, { useEffect, useRef } from \"react\";\nimport { ToastContainer, toast, Slide } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport \"./styles/addStory.scss\";\n\nfunction AddStory() {\n  function RecommendedTag({ tagName }) {\n    var tagBox = document.getElementById(\"game-tags\");\n    const addTag = (tagName) => {\n      var tagBox = document.getElementById(\"game-tags\");\n      tagBox.value += `${tagName}, `;\n    };\n    return <span onClick={() => addTag(tagName)}>{tagName}</span>;\n  }\n  const addGame = (game) => {\n    axios\n      .post(\"http://localhost:8080/api/games/\", game)\n      .then((response) => {\n        console.log(response);\n        toast.success(\"Game is created successfully\", {\n          position: toast.POSITION.BOTTOM_RIGHT,\n          onClose: () =>\n            (window.location.href = \"http://localhost:8000/user/games\"),\n        });\n      })\n      .catch((error) => {\n        console.log(error.response);\n      });\n  };\n\n  function CheckImage(url, fieldName) {\n    return new Promise((resolve, reject) => {\n      var image = new Image();\n      image.onload = function () {\n        if (this.width > 0) {\n          // console.log(\"image exists\");\n          resolve(true);\n        }\n      };\n      image.onerror = function () {\n        // console.log(\"image doesn't exist\");\n        toast.error(fieldName + \" URL is invalid!\", {\n          position: toast.POSITION.BOTTOM_RIGHT,\n        });\n        resolve(false);\n      };\n      image.src = url;\n    });\n  }\n  const [type, setType] = React.useState(null);\n  const [jsonStatus, setJsonStatus] = React.useState(null);\n  React.useEffect(() => {\n    // scroll to top\n    window.scrollTo(0, 0);\n  }, []);\n  if (getCurrentUser) {\n    console.log(getCurrentUser);\n    var id = getCurrentUser.id;\n    var roles = [];\n    getCurrentUser.roles.forEach((x, i) =>\n      roles.push(x.slice(5).toLowerCase())\n    );\n    console.log(roles);\n  }\n  const [playTime, setPlayTime] = React.useState(null);\n  const submitJSON = () => {\n    var jsonText = document.getElementById(\"jsonText\").value;\n    try {\n      var parsedJSON = eval(\"(\" + jsonText + \")\");\n      setPlayTime(Object.keys(parsedJSON).length * 10);\n      setJsonStatus(true);\n    } catch (SyntaxError) {\n      toast.error(\"The JSON submitted is invalid!\", {\n        position: toast.POSITION.BOTTOM_RIGHT,\n      });\n      setJsonStatus(false);\n      return false;\n    }\n  };\n  const submitGame = async (published) => {\n    if (jsonStatus) {\n      var title = document.getElementById(\"game-title\").value;\n      if (title) {\n        var coverHome = document.getElementById(\"home-cover\").value;\n        CheckImage(coverHome, \"Home cover\").then(async (exists) => {\n          if (exists) {\n            console.log(\"success\");\n            var coverWide = document.getElementById(\"wide-cover\").value;\n            CheckImage(coverWide, \"Wide cover\").then(async (exists) => {\n              if (exists) {\n                if (!type) {\n                  toast.error(\"Type of game not chosen!\", {\n                    position: toast.POSITION.BOTTOM_RIGHT,\n                  });\n                }\n                if (type == \"other\") {\n                  if (!document.getElementById(\"source-url\").value) {\n                    toast.error(\"Source not inputted!\", {\n                      position: toast.POSITION.BOTTOM_RIGHT,\n                    });\n                  }\n                }\n                var tags = document.getElementById(\"game-tags\").value;\n                var jsonText = document.getElementById(\"jsonText\").value;\n                var parsedJSON = eval(\"(\" + jsonText + \")\");\n                var description =\n                  document.getElementById(\"source-url\").value +\n                  \"\\n-\\n\" +\n                  document.getElementById(\"game-desc\").value;\n                var game = {\n                  name: title,\n                  coverR: coverHome,\n                  coverW: coverWide,\n                  published: published,\n                  tags: tags,\n                  description: description,\n                  plot: JSON.stringify(parsedJSON),\n                  authorId: id,\n                };\n                console.log(game);\n                console.log(parsedJSON);\n                addGame(game);\n              }\n            });\n          }\n        });\n      } else {\n        toast.error(\"Please input a title!\", {\n          position: toast.POSITION.BOTTOM_RIGHT,\n        });\n      }\n    } else {\n      toast.error(\"Valid JSON not submitted!\", {\n        position: toast.POSITION.BOTTOM_RIGHT,\n      });\n    }\n  };\n\n  const secToMin = (sec) => {\n    return Math.round((sec / 60) * 10) / 10;\n  };\n  const clickTag = (e) => {};\n  return (\n    <>\n      <SecondSide />\n      <section class=\"user-main\">\n        <div className=\"addStory\">\n          <ToastContainer autoClose={1000} theme=\"dark\" transition={Slide} />\n          <h2>\n            <img />\n            Add a Game\n          </h2>\n          <textarea\n            id=\"jsonText\"\n            placeholder=\"Please input json…\"\n            rows=\"15\"\n            spellcheck=\"false\"\n          ></textarea>\n          <div className=\"submit-container\">\n            <div className=\"submit-btn\" onClick={() => submitJSON()}>\n              Submit JSON\n            </div>\n            <p className=\"time-message\">\n              Estimated maximum play time:{\" \"}\n              {playTime !== null ? `${secToMin(playTime)} minutes` : `N/A`}\n            </p>\n          </div>\n          <div className=\"game-attributes\">\n            <h3>Game Settings</h3>\n            <div className=\"attribute-single title-set\">\n              <div>\n                <div className=\"h4-set\">\n                  <h4>Title*</h4>\n                </div>\n                <div className=\"input-container\">\n                  <input\n                    id=\"game-title\"\n                    className=\"setting-field\"\n                    placeholder=\"Please input the name of the game…\"\n                  />\n                </div>\n              </div>\n            </div>\n            <div className=\"attribute-single cover-set\">\n              <div>\n                <div className=\"h4-set\">\n                  <h4>Cover*</h4>\n                </div>\n                <div className=\"input-container\">\n                  <input\n                    id=\"home-cover\"\n                    className=\"setting-field\"\n                    placeholder=\"Please input url for game cover (for homepage)…\"\n                  />\n                </div>\n              </div>\n            </div>\n            <div className=\"attribute-single cover-set\">\n              <div>\n                <div className=\"h4-set\">\n                  <h4>Wide Cover</h4>\n                </div>\n                <div className=\"input-container\">\n                  <input\n                    id=\"wide-cover\"\n                    className=\"setting-field\"\n                    placeholder=\"Please input url for game cover (for details page)…\"\n                  />\n                </div>\n              </div>\n            </div>\n            <div className=\"attribute-single\">\n              <div>\n                <div className=\"h4-set\">\n                  <h4>Type*</h4>\n                </div>\n                <div className=\"input-container\">\n                  <select\n                    id=\"type\"\n                    name=\"status\"\n                    onChange={() =>\n                      setType(document.getElementById(\"type\").value)\n                    }\n                  >\n                    <option value=\"none\">== Choose Type ==</option>\n                    <option value=\"self\">{`🙋 Self-made`}</option>\n                    <option value=\"other\">{`🔗 Other sources`}</option>\n                  </select>\n                  {type == \"other\" && (\n                    <input\n                      id=\"source-url\"\n                      className=\"setting-field\"\n                      placeholder=\"Please input url for the original source of the game\"\n                    />\n                  )}\n                </div>\n              </div>\n            </div>\n            <div className=\"attribute-single tags-set\">\n              <div>\n                <div className=\"h4-set\">\n                  <h4>Tags</h4>\n                </div>\n                <div className=\"input-container\">\n                  <input\n                    className=\"setting-field\"\n                    id=\"game-tags\"\n                    placeholder=\"Please input tags for game (separated with English comma)\"\n                  />\n                </div>\n              </div>\n              <div>\n                <p>\n                  Recommended tags: <RecommendedTag tagName=\"humor\" />\n                  <RecommendedTag tagName=\"horror\" />\n                  <RecommendedTag tagName=\"romance\" />\n                  <RecommendedTag tagName=\"fantasy\" />\n                  <RecommendedTag tagName=\"random\" />\n                </p>\n              </div>\n            </div>\n            <div className=\"attribute-single desc-set\">\n              <div>\n                <div className=\"h4-set\">\n                  <h4>Description</h4>\n                </div>\n                <div className=\"input-container\">\n                  <textarea\n                    id=\"game-desc\"\n                    rows=\"8\"\n                    className=\"setting-field\"\n                    placeholder=\"This will be the best game on Merakey ever…\"\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"btn-container\">\n            <div class=\"submit-btn\" onClick={() => submitGame(false)}>\n              Save as Draft\n            </div>\n            {roles.includes(\"moderator\") ? (\n              <div\n                class=\"submit-btn submit-game\"\n                onClick={() => submitGame(true)}\n              >\n                Submit Game Now\n              </div>\n            ) : roles.includes(\"admin\") ? (\n              <div\n                class=\"submit-btn submit-game\"\n                onClick={() => submitGame(true)}\n              >\n                Submit Game Now\n              </div>\n            ) : (\n              <div class=\"submit-btn submit-game\">Submit Game for Review</div>\n            )}\n          </div>\n        </div>\n      </section>\n    </>\n  );\n}\nexport default AddStory;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}