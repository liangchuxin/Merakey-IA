{"ast":null,"code":"import _regeneratorRuntime from\"/Users/celia/Projects/Merakey/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/celia/Projects/Merakey/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/celia/Projects/Merakey/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"../styles/playGame.scss\";import{useParams}from\"react-router-dom\";import{ToastContainer,toast,Slide}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import React,{useState}from\"react\";import IsLoggedIn,{logout,getCurrentUser}from\"./utilities/loginStatus\";import Confetti from\"react-confetti\";import progress from\"../images/progress.png\";import download from\"../images/download.svg\";import downloadPDF from\"./downloadWrong\";// import { plott } from \"./zzz/plot\";\n// import { addGame } from \"./utilities/addGame\";\n// import { duck } from \"./zzz/donaldDuck\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PlayGame(){var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),players=_React$useState2[0],setPlayers=_React$useState2[1];var _React$useState3=React.useState(null),_React$useState4=_slicedToArray(_React$useState3,2),plot=_React$useState4[0],setPlot=_React$useState4[1];var _React$useState5=React.useState(null),_React$useState6=_slicedToArray(_React$useState5,2),title=_React$useState6[0],setTitle=_React$useState6[1];var _React$useState7=React.useState(null),_React$useState8=_slicedToArray(_React$useState7,2),cover=_React$useState8[0],setCover=_React$useState8[1];var _React$useState9=React.useState(false),_React$useState10=_slicedToArray(_React$useState9,2),played=_React$useState10[0],setPlayed=_React$useState10[1];var _React$useState11=React.useState(null),_React$useState12=_slicedToArray(_React$useState11,2),recordId=_React$useState12[0],setRecordId=_React$useState12[1];var _React$useState13=React.useState(0),_React$useState14=_slicedToArray(_React$useState13,2),progress=_React$useState14[0],setProgress=_React$useState14[1];var _React$useState15=React.useState(0),_React$useState16=_slicedToArray(_React$useState15,2),score=_React$useState16[0],setScore=_React$useState16[1];var _React$useState17=React.useState(0),_React$useState18=_slicedToArray(_React$useState17,2),qsNum=_React$useState18[0],setQsNum=_React$useState18[1];var _React$useState19=React.useState(0),_React$useState20=_slicedToArray(_React$useState19,2),oldScore=_React$useState20[0],setOldScore=_React$useState20[1];var _React$useState21=React.useState(0),_React$useState22=_slicedToArray(_React$useState21,2),oldNum=_React$useState22[0],setOldNum=_React$useState22[1];var _React$useState23=React.useState(null),_React$useState24=_slicedToArray(_React$useState23,2),subject=_React$useState24[0],setSubject=_React$useState24[1];var _React$useState25=React.useState([null]),_React$useState26=_slicedToArray(_React$useState25,2),questions=_React$useState26[0],setQuestions=_React$useState26[1];var _React$useState27=React.useState([null]),_React$useState28=_slicedToArray(_React$useState27,2),topicName=_React$useState28[0],setTopicName=_React$useState28[1];var _useParams=useParams(),id=_useParams.id,topic=_useParams.topic;var mountedRef=React.useRef(true);// ← the \"flag\"\nReact.useEffect(function(){fetch(\"http://localhost:8080/api/games/\".concat(id)).then(function(res){return res.json();}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){var plot;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:plot=JSON.parse(data.plot);setPlot(plot);setPlayers(data.players);setTitle(data.name);setCover(data.coverR);getQuestions(topic);getTopicName(topic);case 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());},[]);// console.log(\"questions: \" + JSON.stringify(questions));\nvar getQuestions=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:fetch(\"http://localhost:8080/api/questions/topic/\".concat(topic)).then(function(response){return response.json();}).then(function(data){setQuestions(data);setSubject(data[0].subject);}).catch(function(error){console.error(\"Error:\",error);});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function getQuestions(){return _ref2.apply(this,arguments);};}();var getTopicName=function getTopicName(){fetch(\"http://localhost:8080/api/topics/id/\".concat(topic)).then(function(response){return response.json();}).then(function(data){setTopicName(data.code+\" \"+data.name);}).catch(function(error){console.error(\"Error:\",error);});};// console.log(plot);\n// console.log(\"Plot\", plot);\nReact.useEffect(function(){if(mountedRef.current){mountedRef.current=false;}else{console.log(\"Plot\",plot);// console.log(\"first block: \" + plot[1]);\nvar count=0;// for (var i = 1; i < Object.keys(plot).length; i += 1) {\n//   console.log(plot[i].type);\n// }\nconsole.log(\"questions: \",questions);for(var i in plot){if(plot[i].type==\"question\"){console.log(plot[i]);// qNum 是问题的数量\nvar qNum=questions.length;var rdQsId=Math.floor(Math.random()*qNum);var qs=questions[rdQsId];console.log(questions);console.log(\"rdQsId: \",rdQsId);questions.splice(rdQsId,1);// console.log(\"qs: \" + JSON.stringify(qs));\n// console.log(questions);\nplot[i].text=qs.question;plot[i].correct=qs.correctAns;plot[i].explanation=qs.explanation;console.log(plot[i]);}}}},[questions]);console.log(\"players: \"+players);// React.useEffect(() => {\n//   addPlay(players + 1);\n// }, []);\nvar addPlay=function addPlay(playerNum){var data={players:playerNum};fetch(\"http://localhost:8080/api/games/\".concat(id),{method:\"PUT\",// or 'PUT'\nheaders:{\"Content-Type\":\"application/json\"},body:JSON.stringify(data)}).then(function(response){return response.json();}).then(function(data){console.log(\"Success:\",data);}).catch(function(error){console.error(\"Error:\",error);});};var createRecord=function createRecord(score,end,profile,topic,game){var data={score:score,end:end,profileId:profile,topicId:topic,gameId:game};fetch(\"http://localhost:8080/api/records/\",{method:\"POST\",// or 'PUT'\nheaders:{\"Content-Type\":\"application/json\"},body:JSON.stringify(data)}).then(function(response){return response.json();}).then(function(data){console.log(\"Success, record is created\",data);// 到时候如果游戏玩完了要改 end 和分数，可以根据 id 来改（不然找不着记录了）\nsetRecordId(data.id);console.log(\"record is set at \",data.id);}).catch(function(error){console.error(\"Error:\",error);});};var modifyRecord=function modifyRecord(end){var data={id:recordId,score:score,end:end};fetch(\"http://localhost:8080/api/records/\",{method:\"PUT\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(data)}).then(function(response){return response.json();}).then(function(data){console.log(\"Success, record is modified\",data);}).catch(function(error){console.error(\"Error:\",error);});};var getUsrInfo=function getUsrInfo(){fetch(\"http://localhost:8080/api/profiles/\".concat(uid),{method:\"GET\",headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(data){setOldScore(data.scores);setOldNum(data.questions);});};var upUsrInfo=function upUsrInfo(){var newScore=oldScore+score;var newNum=oldNum+qsNum;var data={id:uid,scores:newScore,questions:newNum};fetch(\"http://localhost:8080/api/profiles\",{method:\"PUT\",// or 'PUT'\nheaders:{\"Content-Type\":\"application/json\"},body:JSON.stringify(data)}).then(function(response){return response.json();}).then(function(data){console.log(\"Success:\",data);}).catch(function(error){console.error(\"Error:\",error);});};// React.useEffect(() => {\n//   addGame(plott);\n//   console.log(\"Game added\");\n// }, []);\nvar inputRef=React.useRef(null);var contentScroll=React.useRef(null);React.useEffect(function(){inputRef.current.focus();var contentBox=document.getElementsByClassName(\"summary\")[0];contentBox.scrollTop=contentBox.scrollHeight-contentBox.offsetHeight;},[]);var scrollToBottom=function scrollToBottom(){var endPointer=document.getElementById(\"contentEnd\");endPointer.scrollIntoView({behavior:\"smooth\"});};// state hooks\n// var pointer = 1;\nvar _useState=useState(1),_useState2=_slicedToArray(_useState,2),pointer=_useState2[0],setPointer=_useState2[1];var _useState3=useState(\"Press Enter to Start.\"),_useState4=_slicedToArray(_useState3,2),content=_useState4[0],setContent=_useState4[1];var _useState5=useState(\"Enter to continue…\"),_useState6=_slicedToArray(_useState5,2),placeholder=_useState6[0],setPlaceholder=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),confetti=_useState8[0],setConfetti=_useState8[1];// get user\nif(getCurrentUser){// console.log(getCurrentUser);\nvar username=getCurrentUser.username;var email=getCurrentUser.email;var uid=getCurrentUser.id;var roles=[];getCurrentUser.roles.forEach(function(x,i){return roles.push(x.slice(5).toLowerCase());});// console.log(roles);\n}var calculateProgress=function calculateProgress(){if(plot!==null){setProgress(pointer/Object.keys(plot).length*100);}};React.useEffect(function(){calculateProgress();});// operations\nvar handleKeyDown=function handleKeyDown(event){if(played===false){addPlay(players+1);setPlayed(true);if(IsLoggedIn()){getUsrInfo();createRecord(0,\"not done\",uid,topic,id);}}console.log(\"key: \"+event.key);console.log(\"pointer: \"+pointer);console.log(\"type: \"+identifyType(pointer));console.log(\"last plot pointer: \"+pointer);if(identifyType(pointer)==\"story\"){// 如果是剧情，那么框里啥也不能有\nif(event.key){event.preventDefault();}// 如果是投票，那么只能是 ABCD\n}else if(identifyType(pointer)==\"vote\"){console.log(\"Length: \"+event.target.value.length);if([\"A\",\"B\",\"C\",\"D\"].indexOf(event.key.toUpperCase())==-1||event.target.value.length+1>1){event.preventDefault();}// 如果是 option，那只能是指定的字母\n}else if(identifyType(pointer)==\"option\"){var options=plot[pointer].options.map(function(x){return x[0];}).flat(2);if(options.indexOf(event.key.toUpperCase())==-1||event.target.value.length+1>1){event.preventDefault();}}// 如果回车，那么执行提交函数\nif(event.key===\"Enter\"){event.preventDefault();handleSubmit(event);}else{return false;}};// 输入 Enter 提交后\nvar handleSubmit=function handleSubmit(e){setConfetti(false);console.log(\"Submit!\");console.log(\"Submitted content is: \"+e.target.value);console.log(\"pointer is at: \"+pointer,plot[pointer].text);if(identifyType(pointer)==\"story\"){setPlaceholder(\"Enter to continue…\");console.log(\"is end?\"+plot[pointer].end);if(plot[pointer].end===undefined){story(plot[pointer].text,plot[pointer].goto,e);}else{story(plot[pointer].text,plot[pointer].goto,e,plot[pointer].end);}// pointer = newAddress(pointer);\n}else if(identifyType(pointer)==\"question\"){setPlaceholder(\"Input your answer…\");question(plot[pointer].text,plot[pointer].correct,plot[pointer].explanation,plot[pointer].goto,e);e.preventDefault();}else if(identifyType(pointer)==\"vote\"){setPlaceholder(\"Vote someone…\");vote(plot[pointer].text,plot[pointer].choices,plot[pointer].goto,e.target.value);}else if(identifyType(pointer)==\"option\"){setPlaceholder(\"Make an option…\");option(plot[pointer].text,plot[pointer].options,plot[pointer].goto,e.target.value);}e.target.value=null;scrollToBottom();};//弄一个读取 key down 的，一个 submit form 的。key down\n//的用于控制用户可以输入什么不可以输入什么；譬如剧情不能打字只能输入\"enter\"。\n// identify type first\nvar identifyType=function identifyType(pointer){return plot[pointer].type;};// self-defined functions\nvar story=function story(text,goto,e,end){output(text);setPointer(goto);e.preventDefault();// if (pointer == \"end\") {\n//   setConfetti(true);\n// }\nconsole.log(\"end: \"+end);if(end==\"true\"){setConfetti(true);}if(IsLoggedIn()){if(end!==null&&end!==undefined){modifyRecord(end);upUsrInfo();}}};var question=function question(text,correct,explanation,goto,e){if(e.target.value===\"\"){// console.log(\"no input yet!\");\noutput(text);}else{// output(userinput);\n// console.log(\"user answer: \" + userinput + \"correct answer: \" + correct);\nvar input=e.target.value;var correctAnswer=correct;// 判断用户回答是否正确\nif(checkAnswer(input,correctAnswer)){addCorrect(text);output(input+\"\\n\\nCorrect! Great job! The plot now continues…\");setConfetti(true);setPointer(goto[0]);setScore(score+100);toast.warning(\"SCORES x 100 (temporary)\",{position:toast.POSITION.BOTTOM_RIGHT,icon:\"💰\"});}else{addWrong(text);output(input+\"\\n\\nYour answer is wrong! The correct answer is: \"+correct+\"\\n\\n\"+explanation);setPointer(goto[1]);}setQsNum(qsNum+1);setPlaceholder(\"Enter to continue…\");e.preventDefault();}};var vote=function vote(text,choices,goto,userinput){if(userinput===\"\"){output(text);}else{var input=userinput;input=input.toUpperCase();var choiceIndex;switch(input){case\"A\":choiceIndex=0;break;case\"B\":choiceIndex=1;break;case\"C\":choiceIndex=2;break;case\"D\":choiceIndex=3;break;}output(\"You voted [\"+input+\"]\"+choices[choiceIndex]);setPointer(goto[choiceIndex]);}setPlaceholder(\"Enter to continue…\");};var option=function option(text,optionGroups,goto,userinput){if(userinput===\"\"){output(text);}else{var input=userinput;input=input.toUpperCase();var options=plot[pointer].options.map(function(x){return x[0];}).flat(2);var optionIndex=options.indexOf(input);console.log(\"optionIndex: \"+optionIndex);console.log(\"optionGroups: \"+optionGroups);output(\"Your option is [\"+input+\"]\"+optionGroups[optionIndex][1]);setPointer(goto[optionIndex]);console.log(\"setPointer: \"+goto[optionIndex]);}setPlaceholder(\"Enter to continue…\");};var newAddress=function newAddress(pointer){var newAddress=plot[pointer].goto;return newAddress;};var checkAnswer=function checkAnswer(userInput,correctAnswer){if(userInput===correctAnswer){return true;}else{return false;}};function ShowConfetti(props){var confetti=props.confetti;if(confetti){return/*#__PURE__*/_jsx(Confetti,{recycle:false,initialVelocityY:-20,numberOfPieces:100,colors:[\"#F7CF56\",\"#D0D0D0\",\"#282828\"]});}else{return null;}}var addCorrect=function addCorrect(question){setQHistory(qHistory.concat([[question,\"correct\"]]));};var addWrong=function addWrong(question){setQHistory(qHistory.concat([[question,\"wrong\"]]));};var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),qHistory=_useState10[0],setQHistory=_useState10[1];// detail ones\nvar output=function output(text){setContent(content+\"\\n\\n\"+text);};return/*#__PURE__*/_jsxs(\"div\",{className:\"playGame\",children:[/*#__PURE__*/_jsx(ShowConfetti,{confetti:confetti}),/*#__PURE__*/_jsx(ToastContainer,{autoClose:2000,theme:\"dark\",transition:Slide}),/*#__PURE__*/_jsxs(\"div\",{className:\"chapters\",children:[cover!=null&&/*#__PURE__*/_jsx(\"img\",{className:\"cover\",src:cover}),/*#__PURE__*/_jsx(\"h3\",{className:\"game-title\",children:title}),/*#__PURE__*/_jsxs(\"div\",{className:\"game-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Subject\"}),\"\\xA0\",subject]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\xA0\\xA0Topic\\xA0\\xA0\"}),\"\\xA0\",topicName]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"current-info\",children:[/*#__PURE__*/_jsxs(\"p\",{title:\"You will receive your scores once the game reaches an end.\",children:[\"Temporary score: \",score]}),/*#__PURE__*/_jsxs(\"p\",{title:\"Right or wrong\\u2026\",children:[\"Question answered: \",qsNum]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"story\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"progress-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"progress\",style:{width:\"\".concat(progress,\"%\")}})}),/*#__PURE__*/_jsxs(\"p\",{className:\"summary\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),content+\"\\n\\n\\n\\n\\n\\n\\n\",/*#__PURE__*/_jsx(\"span\",{id:\"contentEnd\"})]}),/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsx(\"input\",{className:\"input\",placeholder:placeholder,onKeyPress:handleKeyDown,ref:inputRef})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"questions\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"history\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"History\"}),qHistory.map(function(questionText){if(questionText[1]==\"correct\"){return/*#__PURE__*/_jsx(\"div\",{className:\"question-container correct\",children:questionText[0]},questionText[0]);}else{console.log(\"Question text: \"+questionText);return/*#__PURE__*/_jsx(\"div\",{className:\"question-container wrong\",children:questionText[0]},questionText[0]);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"wrong-questions\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Wrong answers\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"download-box\",onClick:function onClick(){return downloadPDF(qHistory);},children:[/*#__PURE__*/_jsx(\"img\",{src:download}),\"Download Questions\"]}),qHistory.map(function(questionText){if(questionText[1]==\"wrong\"){return/*#__PURE__*/_jsx(\"div\",{className:\"question-container wrong\",children:questionText[0]},questionText[0]);}})]})]})]});}export default PlayGame;","map":{"version":3,"names":["useParams","ToastContainer","toast","Slide","React","useState","IsLoggedIn","logout","getCurrentUser","Confetti","progress","download","downloadPDF","PlayGame","players","setPlayers","plot","setPlot","title","setTitle","cover","setCover","played","setPlayed","recordId","setRecordId","setProgress","score","setScore","qsNum","setQsNum","oldScore","setOldScore","oldNum","setOldNum","subject","setSubject","questions","setQuestions","topicName","setTopicName","id","topic","mountedRef","useRef","useEffect","fetch","then","res","json","data","JSON","parse","name","coverR","getQuestions","getTopicName","response","catch","error","console","code","current","log","count","i","type","qNum","length","rdQsId","Math","floor","random","qs","splice","text","question","correct","correctAns","explanation","addPlay","playerNum","method","headers","body","stringify","createRecord","end","profile","game","profileId","topicId","gameId","modifyRecord","getUsrInfo","uid","scores","upUsrInfo","newScore","newNum","inputRef","contentScroll","focus","contentBox","document","getElementsByClassName","scrollTop","scrollHeight","offsetHeight","scrollToBottom","endPointer","getElementById","scrollIntoView","behavior","pointer","setPointer","content","setContent","placeholder","setPlaceholder","confetti","setConfetti","username","email","roles","forEach","x","push","slice","toLowerCase","calculateProgress","Object","keys","handleKeyDown","event","key","identifyType","preventDefault","target","value","indexOf","toUpperCase","options","map","flat","handleSubmit","e","undefined","story","goto","vote","choices","option","output","input","correctAnswer","checkAnswer","addCorrect","warning","position","POSITION","BOTTOM_RIGHT","icon","addWrong","userinput","choiceIndex","optionGroups","optionIndex","newAddress","userInput","ShowConfetti","props","setQHistory","qHistory","concat","width","questionText"],"sources":["/Users/celia/Projects/Merakey/client/src/components/playGame.js"],"sourcesContent":["import \"../styles/playGame.scss\";\nimport { useParams } from \"react-router-dom\";\nimport { ToastContainer, toast, Slide } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport React, { useState } from \"react\";\nimport IsLoggedIn, { logout, getCurrentUser } from \"./utilities/loginStatus\";\nimport Confetti from \"react-confetti\";\nimport progress from \"../images/progress.png\";\nimport download from \"../images/download.svg\";\nimport downloadPDF from \"./downloadWrong\";\n// import { plott } from \"./zzz/plot\";\n// import { addGame } from \"./utilities/addGame\";\n// import { duck } from \"./zzz/donaldDuck\";\n\nfunction PlayGame() {\n  const [players, setPlayers] = React.useState(null);\n  const [plot, setPlot] = React.useState(null);\n  const [title, setTitle] = React.useState(null);\n  const [cover, setCover] = React.useState(null);\n  const [played, setPlayed] = React.useState(false);\n  const [recordId, setRecordId] = React.useState(null);\n  const [progress, setProgress] = React.useState(0);\n  const [score, setScore] = React.useState(0);\n  const [qsNum, setQsNum] = React.useState(0);\n  const [oldScore, setOldScore] = React.useState(0);\n  const [oldNum, setOldNum] = React.useState(0);\n  const [subject, setSubject] = React.useState(null);\n  const [questions, setQuestions] = React.useState([null]);\n  const [topicName, setTopicName] = React.useState([null]);\n  const { id, topic } = useParams();\n  const mountedRef = React.useRef(true); // ← the \"flag\"\n\n  React.useEffect(() => {\n    fetch(`http://localhost:8080/api/games/${id}`)\n      .then((res) => res.json())\n      .then(async (data) => {\n        var plot = JSON.parse(data.plot);\n        setPlot(plot);\n        setPlayers(data.players);\n        setTitle(data.name);\n        setCover(data.coverR);\n        getQuestions(topic);\n        getTopicName(topic);\n      });\n  }, []);\n  // console.log(\"questions: \" + JSON.stringify(questions));\n\n  const getQuestions = async () => {\n    fetch(`http://localhost:8080/api/questions/topic/${topic}`)\n      .then((response) => response.json())\n      .then((data) => {\n        setQuestions(data);\n        setSubject(data[0].subject);\n      })\n      .catch((error) => {\n        console.error(\"Error:\", error);\n      });\n  };\n  const getTopicName = () => {\n    fetch(`http://localhost:8080/api/topics/id/${topic}`)\n      .then((response) => response.json())\n      .then((data) => {\n        setTopicName(data.code + \" \" + data.name);\n      })\n      .catch((error) => {\n        console.error(\"Error:\", error);\n      });\n  };\n  // console.log(plot);\n  // console.log(\"Plot\", plot);\n\n  React.useEffect(() => {\n    if (mountedRef.current) {\n      mountedRef.current = false;\n    } else {\n      console.log(\"Plot\", plot);\n      // console.log(\"first block: \" + plot[1]);\n      var count = 0;\n      // for (var i = 1; i < Object.keys(plot).length; i += 1) {\n      //   console.log(plot[i].type);\n      // }\n      console.log(\"questions: \", questions);\n      for (let i in plot) {\n        if (plot[i].type == \"question\") {\n          console.log(plot[i]);\n          // qNum 是问题的数量\n          var qNum = questions.length;\n          var rdQsId = Math.floor(Math.random() * qNum);\n          var qs = questions[rdQsId];\n          console.log(questions);\n          console.log(\"rdQsId: \", rdQsId);\n          questions.splice(rdQsId, 1);\n          // console.log(\"qs: \" + JSON.stringify(qs));\n          // console.log(questions);\n          plot[i].text = qs.question;\n          plot[i].correct = qs.correctAns;\n          plot[i].explanation = qs.explanation;\n          console.log(plot[i]);\n        }\n      }\n    }\n  }, [questions]);\n\n  console.log(\"players: \" + players);\n  // React.useEffect(() => {\n  //   addPlay(players + 1);\n  // }, []);\n\n  const addPlay = (playerNum) => {\n    const data = { players: playerNum };\n    fetch(`http://localhost:8080/api/games/${id}`, {\n      method: \"PUT\", // or 'PUT'\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(data),\n    })\n      .then((response) => response.json())\n      .then((data) => {\n        console.log(\"Success:\", data);\n      })\n      .catch((error) => {\n        console.error(\"Error:\", error);\n      });\n  };\n  const createRecord = (score, end, profile, topic, game) => {\n    const data = {\n      score: score,\n      end: end,\n      profileId: profile,\n      topicId: topic,\n      gameId: game,\n    };\n    fetch(`http://localhost:8080/api/records/`, {\n      method: \"POST\", // or 'PUT'\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(data),\n    })\n      .then((response) => response.json())\n      .then((data) => {\n        console.log(\"Success, record is created\", data);\n        // 到时候如果游戏玩完了要改 end 和分数，可以根据 id 来改（不然找不着记录了）\n        setRecordId(data.id);\n        console.log(\"record is set at \", data.id);\n      })\n      .catch((error) => {\n        console.error(\"Error:\", error);\n      });\n  };\n\n  const modifyRecord = (end) => {\n    const data = { id: recordId, score: score, end: end };\n    fetch(`http://localhost:8080/api/records/`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(data),\n    })\n      .then((response) => response.json())\n      .then((data) => {\n        console.log(\"Success, record is modified\", data);\n      })\n      .catch((error) => {\n        console.error(\"Error:\", error);\n      });\n  };\n  const getUsrInfo = () => {\n    fetch(`http://localhost:8080/api/profiles/${uid}`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        setOldScore(data.scores);\n        setOldNum(data.questions);\n      });\n  };\n  const upUsrInfo = () => {\n    var newScore = oldScore + score;\n    var newNum = oldNum + qsNum;\n    const data = { id: uid, scores: newScore, questions: newNum };\n    fetch(`http://localhost:8080/api/profiles`, {\n      method: \"PUT\", // or 'PUT'\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(data),\n    })\n      .then((response) => response.json())\n      .then((data) => {\n        console.log(\"Success:\", data);\n      })\n      .catch((error) => {\n        console.error(\"Error:\", error);\n      });\n  };\n  // React.useEffect(() => {\n  //   addGame(plott);\n  //   console.log(\"Game added\");\n  // }, []);\n\n  const inputRef = React.useRef(null);\n  const contentScroll = React.useRef(null);\n  React.useEffect(() => {\n    inputRef.current.focus();\n    var contentBox = document.getElementsByClassName(\"summary\")[0];\n    contentBox.scrollTop = contentBox.scrollHeight - contentBox.offsetHeight;\n  }, []);\n  const scrollToBottom = () => {\n    var endPointer = document.getElementById(\"contentEnd\");\n    endPointer.scrollIntoView({ behavior: \"smooth\" });\n  };\n  // state hooks\n  // var pointer = 1;\n  const [pointer, setPointer] = useState(1);\n  const [content, setContent] = useState(\"Press Enter to Start.\");\n  const [placeholder, setPlaceholder] = useState(\"Enter to continue…\");\n  const [confetti, setConfetti] = useState(false);\n\n  // get user\n  if (getCurrentUser) {\n    // console.log(getCurrentUser);\n    const username = getCurrentUser.username;\n    var email = getCurrentUser.email;\n    var uid = getCurrentUser.id;\n    var roles = [];\n    getCurrentUser.roles.forEach((x, i) =>\n      roles.push(x.slice(5).toLowerCase())\n    );\n    // console.log(roles);\n  }\n\n  const calculateProgress = () => {\n    if (plot !== null) {\n      setProgress((pointer / Object.keys(plot).length) * 100);\n    }\n  };\n  React.useEffect(() => {\n    calculateProgress();\n  });\n\n  // operations\n  const handleKeyDown = (event) => {\n    if (played === false) {\n      addPlay(players + 1);\n      setPlayed(true);\n      if (IsLoggedIn()) {\n        getUsrInfo();\n        createRecord(0, \"not done\", uid, topic, id);\n      }\n    }\n    console.log(\"key: \" + event.key);\n    console.log(\"pointer: \" + pointer);\n    console.log(\"type: \" + identifyType(pointer));\n    console.log(\"last plot pointer: \" + pointer);\n    if (identifyType(pointer) == \"story\") {\n      // 如果是剧情，那么框里啥也不能有\n      if (event.key) {\n        event.preventDefault();\n      }\n      // 如果是投票，那么只能是 ABCD\n    } else if (identifyType(pointer) == \"vote\") {\n      console.log(\"Length: \" + event.target.value.length);\n      if (\n        [\"A\", \"B\", \"C\", \"D\"].indexOf(event.key.toUpperCase()) == -1 ||\n        event.target.value.length + 1 > 1\n      ) {\n        event.preventDefault();\n      }\n      // 如果是 option，那只能是指定的字母\n    } else if (identifyType(pointer) == \"option\") {\n      var options = plot[pointer].options.map((x) => x[0]).flat(2);\n      if (\n        options.indexOf(event.key.toUpperCase()) == -1 ||\n        event.target.value.length + 1 > 1\n      ) {\n        event.preventDefault();\n      }\n    }\n    // 如果回车，那么执行提交函数\n    if (event.key === \"Enter\") {\n      event.preventDefault();\n      handleSubmit(event);\n    } else {\n      return false;\n    }\n  };\n  // 输入 Enter 提交后\n  const handleSubmit = (e) => {\n    setConfetti(false);\n    console.log(\"Submit!\");\n    console.log(\"Submitted content is: \" + e.target.value);\n    console.log(\"pointer is at: \" + pointer, plot[pointer].text);\n    if (identifyType(pointer) == \"story\") {\n      setPlaceholder(\"Enter to continue…\");\n      console.log(\"is end?\" + plot[pointer].end);\n      if (plot[pointer].end === undefined) {\n        story(plot[pointer].text, plot[pointer].goto, e);\n      } else {\n        story(plot[pointer].text, plot[pointer].goto, e, plot[pointer].end);\n      }\n      // pointer = newAddress(pointer);\n    } else if (identifyType(pointer) == \"question\") {\n      setPlaceholder(\"Input your answer…\");\n      question(\n        plot[pointer].text,\n        plot[pointer].correct,\n        plot[pointer].explanation,\n        plot[pointer].goto,\n        e\n      );\n      e.preventDefault();\n    } else if (identifyType(pointer) == \"vote\") {\n      setPlaceholder(\"Vote someone…\");\n      vote(\n        plot[pointer].text,\n        plot[pointer].choices,\n        plot[pointer].goto,\n        e.target.value\n      );\n    } else if (identifyType(pointer) == \"option\") {\n      setPlaceholder(\"Make an option…\");\n      option(\n        plot[pointer].text,\n        plot[pointer].options,\n        plot[pointer].goto,\n        e.target.value\n      );\n    }\n    e.target.value = null;\n    scrollToBottom();\n  };\n  //弄一个读取 key down 的，一个 submit form 的。key down\n  //的用于控制用户可以输入什么不可以输入什么；譬如剧情不能打字只能输入\"enter\"。\n\n  // identify type first\n  const identifyType = (pointer) => {\n    return plot[pointer].type;\n  };\n\n  // self-defined functions\n  const story = (text, goto, e, end) => {\n    output(text);\n    setPointer(goto);\n    e.preventDefault();\n    // if (pointer == \"end\") {\n    //   setConfetti(true);\n    // }\n    console.log(\"end: \" + end);\n    if (end == \"true\") {\n      setConfetti(true);\n    }\n    if (IsLoggedIn()) {\n      if (end !== null && end !== undefined) {\n        modifyRecord(end);\n        upUsrInfo();\n      }\n    }\n  };\n  const question = (text, correct, explanation, goto, e) => {\n    if (e.target.value === \"\") {\n      // console.log(\"no input yet!\");\n      output(text);\n    } else {\n      // output(userinput);\n      // console.log(\"user answer: \" + userinput + \"correct answer: \" + correct);\n\n      var input = e.target.value;\n      var correctAnswer = correct;\n      // 判断用户回答是否正确\n      if (checkAnswer(input, correctAnswer)) {\n        addCorrect(text);\n        output(input + \"\\n\\nCorrect! Great job! The plot now continues…\");\n        setConfetti(true);\n        setPointer(goto[0]);\n        setScore(score + 100);\n        toast.warning(\"SCORES x 100 (temporary)\", {\n          position: toast.POSITION.BOTTOM_RIGHT,\n          icon: \"💰\",\n        });\n      } else {\n        addWrong(text);\n        output(\n          input +\n            \"\\n\\nYour answer is wrong! The correct answer is: \" +\n            correct +\n            \"\\n\\n\" +\n            explanation\n        );\n        setPointer(goto[1]);\n      }\n      setQsNum(qsNum + 1);\n      setPlaceholder(\"Enter to continue…\");\n      e.preventDefault();\n    }\n  };\n  const vote = (text, choices, goto, userinput) => {\n    if (userinput === \"\") {\n      output(text);\n    } else {\n      var input = userinput;\n      input = input.toUpperCase();\n      var choiceIndex;\n      switch (input) {\n        case \"A\":\n          choiceIndex = 0;\n          break;\n        case \"B\":\n          choiceIndex = 1;\n          break;\n        case \"C\":\n          choiceIndex = 2;\n          break;\n        case \"D\":\n          choiceIndex = 3;\n          break;\n      }\n      output(\"You voted [\" + input + \"]\" + choices[choiceIndex]);\n      setPointer(goto[choiceIndex]);\n    }\n    setPlaceholder(\"Enter to continue…\");\n  };\n  const option = (text, optionGroups, goto, userinput) => {\n    if (userinput === \"\") {\n      output(text);\n    } else {\n      var input = userinput;\n      input = input.toUpperCase();\n      var options = plot[pointer].options.map((x) => x[0]).flat(2);\n      var optionIndex = options.indexOf(input);\n      console.log(\"optionIndex: \" + optionIndex);\n      console.log(\"optionGroups: \" + optionGroups);\n      output(\"Your option is [\" + input + \"]\" + optionGroups[optionIndex][1]);\n      setPointer(goto[optionIndex]);\n      console.log(\"setPointer: \" + goto[optionIndex]);\n    }\n    setPlaceholder(\"Enter to continue…\");\n  };\n  const newAddress = (pointer) => {\n    var newAddress = plot[pointer].goto;\n    return newAddress;\n  };\n  const checkAnswer = (userInput, correctAnswer) => {\n    if (userInput === correctAnswer) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  function ShowConfetti(props) {\n    const confetti = props.confetti;\n    if (confetti) {\n      return (\n        <Confetti\n          recycle={false}\n          initialVelocityY={-20}\n          numberOfPieces={100}\n          colors={[\"#F7CF56\", \"#D0D0D0\", \"#282828\"]}\n        />\n      );\n    } else {\n      return null;\n    }\n  }\n\n  const addCorrect = (question) => {\n    setQHistory(qHistory.concat([[question, \"correct\"]]));\n  };\n\n  const addWrong = (question) => {\n    setQHistory(qHistory.concat([[question, \"wrong\"]]));\n  };\n\n  const [qHistory, setQHistory] = useState([]);\n\n  // detail ones\n  const output = (text) => {\n    setContent(content + \"\\n\\n\" + text);\n  };\n\n  return (\n    <div className=\"playGame\">\n      <ShowConfetti confetti={confetti} />\n      <ToastContainer autoClose={2000} theme=\"dark\" transition={Slide} />\n      <div className=\"chapters\">\n        {cover != null && <img className=\"cover\" src={cover} />}\n\n        <h3 className=\"game-title\">{title}</h3>\n        <div className=\"game-info\">\n          <p>\n            <span>Subject</span>\n            &nbsp;{subject}\n          </p>\n          <p>\n            <span>&nbsp;&nbsp;Topic&nbsp;&nbsp;</span>\n            &nbsp;{topicName}\n          </p>\n        </div>\n        <div className=\"current-info\">\n          <p title=\"You will receive your scores once the game reaches an end.\">\n            Temporary score: {score}\n          </p>\n          <p title=\"Right or wrong…\">Question answered: {qsNum}</p>\n        </div>\n      </div>\n      <div className=\"story\">\n        <div className=\"progress-container\">\n          <div className=\"progress\" style={{ width: `${progress}%` }} />\n        </div>\n        <p className=\"summary\">\n          <br />\n          <br />\n          <br />\n\n          <br />\n          {content + \"\\n\\n\\n\\n\\n\\n\\n\"}\n          <span id=\"contentEnd\"></span>\n        </p>\n        <form>\n          <input\n            className=\"input\"\n            placeholder={placeholder}\n            onKeyPress={handleKeyDown}\n            ref={inputRef}\n          />\n        </form>\n      </div>\n      <div className=\"questions\">\n        <div className=\"history\">\n          <h3>History</h3>\n          {qHistory.map((questionText) => {\n            if (questionText[1] == \"correct\") {\n              return (\n                <div\n                  className=\"question-container correct\"\n                  key={questionText[0]}\n                >\n                  {questionText[0]}\n                </div>\n              );\n            } else {\n              console.log(\"Question text: \" + questionText);\n              return (\n                <div className=\"question-container wrong\" key={questionText[0]}>\n                  {questionText[0]}\n                </div>\n              );\n            }\n          })}\n        </div>\n        <div className=\"wrong-questions\">\n          <h3>Wrong answers</h3>\n          <div className=\"download-box\" onClick={() => downloadPDF(qHistory)}>\n            <img src={download} />\n            Download Questions\n          </div>\n          {qHistory.map((questionText) => {\n            if (questionText[1] == \"wrong\") {\n              return (\n                <div className=\"question-container wrong\" key={questionText[0]}>\n                  {questionText[0]}\n                </div>\n              );\n            }\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\nexport default PlayGame;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}